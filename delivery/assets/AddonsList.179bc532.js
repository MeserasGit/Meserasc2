import{_ as w,aw as A,ax as M,u as I,A as m,m as b,n as o,$ as c,d as s,p as r,F as u,q as a,a0 as L,a4 as h,V as p,X as _,am as d,ap as l,a1 as v,b6 as B,b7 as V,a3 as T,ao as N}from"./index.9022de34.js";import{Q as z}from"./QInnerLoading.788e47b1.js";import{Q as E}from"./QSpace.fb5f89a7.js";import{Q as x}from"./QImg.ad5480e5.js";import{Q as f}from"./QItemLabel.4dae639c.js";import{Q}from"./QList.da851dcd.js";import{Q as P}from"./QExpansionItem.ea7db586.js";import{u as O}from"./MenuStore.3c045915.js";import{u as H}from"./AccessStore.4066b28f.js";import"./QSlideTransition.3f201d8d.js";const j={name:"AddonsList",components:{ConfirmDialog:A(()=>M(()=>import("./ConfirmDialog.d3b3cd57.js"),["assets/ConfirmDialog.d3b3cd57.js","assets/QToolbarTitle.5ecfa0aa.js","assets/index.9022de34.js","assets/index.8b19a20e.css","assets/QToolbar.2a2e526c.js"])),ListNoData:A(()=>M(()=>import("./ListNoData.2fb52f53.js"),["assets/ListNoData.2fb52f53.js","assets/index.9022de34.js","assets/index.8b19a20e.css"]))},data(){return{subitem_id:0}},setup(){const t=O(),k=I(),g=H();return{MenuStore:t,DataStore:k,AccessStore:g}},created(){this.MenuStore.hadAddonCategory()?this.$route.query.refresh==1&&this.MenuStore.geStoreAddonMenu():this.MenuStore.geStoreAddonMenu()},methods:{confirmDelete(t){this.subitem_id=t,this.$refs.confirm_dialog.dialog=!0},afterConfirm(){this.$refs.confirm_dialog.dialog=!1,m.showLoadingBox("",this.$q),m.fetchDataByTokenPost("deleteAddonItem","id="+this.subitem_id).then(t=>{this.$emit("afterDeleteitem")}).catch(t=>{m.notify("dark",t,"error",this.$q)}).then(t=>{m.hideLoadingBox(this.$q)})},setAvailable(t,k,g){m.showLoadingBox("",this.$q),m.fetchDataByTokenPost("setAddonItemAvailable","id="+g+"&active="+t).then(e=>{}).catch(e=>{m.notify("dark",e,"error",this.$q)}).then(e=>{m.hideLoadingBox(this.$q)})}}},$={class:"text-grey ellipsis-2-lines font12 line-normal"},F=["innerHTML"],R={class:"text-grey"},U={class:"font13 no-margin line-normal"},X={class:"text-grey ellipsis-2-lines font12 line-normal"},G=["innerHTML"],J={key:0,class:"text-grey-7 font12 text-weight-medium"},K={class:"column items-center col-12"},W={class:"col"},Y={class:"col"};function Z(t,k,g,e,ee,S){const q=b("ListNoData"),D=b("ConfirmDialog");return o(),c(u,null,[s(z,{showing:e.MenuStore.loading_addon,color:"primary",size:"md","label-class":"dark"},null,8,["showing"]),s(E,{class:"q-pa-xs"}),e.MenuStore.addon.length<=0&&!e.MenuStore.loading_addon?(o(),r(q,{key:0,title:t.$t("No available data"),subtitle:t.$t("Addons and addon item will show here"),set_height:"min-height: calc(70vh)"},null,8,["title","subtitle"])):(o(),c(u,{key:1},[e.AccessStore.hasAccess("food.addoncategory")?(o(),r(Q,{key:0,separator:""},{default:a(()=>[(o(!0),c(u,null,L(e.MenuStore.addon,i=>(o(),r(P,{key:i},{header:a(()=>[s(h,{avatar:""},{default:a(()=>[s(x,{src:i.url_image,lazy:"",fit:"cover",style:{height:"60px",width:"60px"},class:"radius8","spinner-color":"secondary","spinner-size":"sm"},null,8,["src"])]),_:2},1024),s(h,null,{default:a(()=>[s(f,null,{default:a(()=>[p(_(i.subcategory_name),1)]),_:2},1024),i.subcategory_description?(o(),r(f,{key:0,caption:""},{default:a(()=>[d("div",$,[d("span",{innerHTML:i.subcategory_description},null,8,F)])]),_:2},1024)):l("",!0),s(f,null,{default:a(()=>[i.subcat_id>0?(o(),r(v,{key:0,flat:"",label:t.$t("Edit Addon"),"no-caps":"",size:"sm",color:"primary",class:"q-pa-none min-height text-weight-bold",to:{path:"/addcategory/edit",query:{subcat_id:i.subcat_id}}},null,8,["label","to"])):l("",!0)]),_:2},1024)]),_:2},1024),s(h,{side:""},{default:a(()=>[s(f,{caption:""},{default:a(()=>[p(_(Object.keys(i.items).length)+" ",1),Object.keys(i.items).length>0?(o(),c(u,{key:0},[p(_(t.$t("Items")),1)],64)):(o(),c(u,{key:1},[p(_(t.$t("Item")),1)],64))]),_:2},1024)]),_:2},1024)]),default:a(()=>[e.AccessStore.hasAccess("food.addonitem")?(o(),r(B,{key:0},{default:a(()=>[Object.keys(i.items).length<=0?(o(),r(V,{key:0,class:"text-center"},{default:a(()=>[d("p",R,_(t.$t("No available items")),1)]),_:1})):(o(),r(Q,{key:1,separator:""},{default:a(()=>[(o(!0),c(u,null,L(i.items,n=>(o(),c(u,{key:n},[e.MenuStore.addon_items[n]?(o(),r(T,{key:0,clickable:""},{default:a(()=>[e.MenuStore.addon_items[n].has_photo?(o(),r(h,{key:0,avatar:""},{default:a(()=>[s(x,{src:e.MenuStore.addon_items[n].url_image,lazy:"",fit:"cover",style:{height:"60px",width:"60px"},class:"radius8","spinner-color":"secondary","spinner-size":"sm"},null,8,["src"])]),_:2},1024)):l("",!0),s(h,null,{default:a(()=>[s(f,null,{default:a(()=>[d("div",U,_(e.MenuStore.addon_items[n].sub_item_name),1),d("div",X,[d("span",{innerHTML:e.MenuStore.addon_items[n].item_description},null,8,G)]),e.MenuStore.addon_items[n].price?(o(),c("div",J,_(e.MenuStore.addon_items[n].price),1)):l("",!0)]),_:2},1024),e.AccessStore.hasAccess("food.addonitem_update")?(o(),r(f,{key:0,class:"q-gutter-sm"},{default:a(()=>[s(N,{label:t.$t("Available"),modelValue:e.MenuStore.addon_items[n].available,"onUpdate:modelValue":[y=>e.MenuStore.addon_items[n].available=y,(y,C)=>S.setAvailable(y,C,e.MenuStore.addon_items[n].sub_item_id)]},null,8,["label","modelValue","onUpdate:modelValue"])]),_:2},1024)):l("",!0)]),_:2},1024),s(h,{side:"",class:"row items-stretch"},{default:a(()=>[d("div",K,[d("div",W,[s(v,{round:"",color:t.$q.dark.mode?"grey600":"primary","text-color":t.$q.dark.mode?"grey300":"white",icon:"las la-edit",size:"xs",unelevated:"",to:{path:"/addonitems/edit",query:{id:e.MenuStore.addon_items[n].sub_item_id}}},null,8,["color","text-color","to"])]),d("div",Y,[e.AccessStore.hasAccess("food.addonitem_delete")?(o(),r(v,{key:0,round:"",color:t.$q.dark.mode?"grey600":"mygrey","text-color":t.$q.dark.mode?"grey300":"dark",icon:"las la-trash",size:"xs",unelevated:"",onClick:y=>S.confirmDelete(e.MenuStore.addon_items[n].sub_item_id)},null,8,["color","text-color","onClick"])):l("",!0)])])]),_:2},1024)]),_:2},1024)):l("",!0)],64))),128))]),_:2},1024))]),_:2},1024)):l("",!0)]),_:2},1024))),128))]),_:1})):l("",!0)],64)),s(D,{ref:"confirm_dialog",data:e.DataStore.data_dialog,onAfterConfirm:S.afterConfirm},null,8,["data","onAfterConfirm"])],64)}var ce=w(j,[["render",Z]]);export{ce as default};
