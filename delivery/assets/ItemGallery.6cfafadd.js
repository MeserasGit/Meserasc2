import{_ as v,aw as b,u as x,A as o,m as C,n as r,$ as l,d as a,q as d,F as h,Z as p,a1 as f,V as g,X as c,Y as y,p as u,am as n,ap as _,a0 as Q,ax as q}from"./index.9022de34.js";import{Q as I}from"./QToolbarTitle.5ecfa0aa.js";import{Q as $}from"./QToolbar.2a2e526c.js";import{Q as B}from"./QHeader.522a2ada.js";import{Q as A}from"./QInnerLoading.788e47b1.js";import{Q as G}from"./QImg.ad5480e5.js";import{Q as P}from"./QPage.a79a1249.js";import{Q as T}from"./QPullToRefresh.dea2c8d3.js";import"./QResizeObserver.129b050c.js";import"./TouchPan.f449f070.js";import"./touch.3df10340.js";import"./selection.5d84a74a.js";import"./format.3e32b8d9.js";const S={name:"ItemAddPrice",components:{ConfirmDialog:b(()=>q(()=>import("./ConfirmDialog.d3b3cd57.js"),["assets/ConfirmDialog.d3b3cd57.js","assets/QToolbarTitle.5ecfa0aa.js","assets/index.9022de34.js","assets/index.8b19a20e.css","assets/QToolbar.2a2e526c.js"]))},data(){return{dialog_price:!1,id:"",loading:!0,data:[],edit:!1,data_to_delete:[],title:""}},setup(e){return{DataStore:x()}},computed:{hasData(){return Object.keys(this.data).length>0||!o.empty(this.id)},hasData2(){return Object.keys(this.data).length>0}},created(){this.id=this.$route.query.item_uuid,o.empty(this.id)?this.loading=!1:this.getItemGallery()},methods:{refresh(e){this.getItemGallery(e)},getItemGallery(e){this.loading=!0,o.fetchDataByTokenPost("getItemGallery","id="+this.id).then(t=>{this.data=t.details}).catch(t=>{this.data=[]}).then(t=>{this.loading=!1,o.empty(e)||e()})},confirmDelete(e,t){this.data_to_delete=e,this.data_to_delete.index=t,this.$refs.confirm_dialog.dialog=!0},afterConfirm(){this.$refs.confirm_dialog.dialog=!1,o.showLoadingBox("",this.$q),o.fetchDataByTokenPost("deleteItemGallery","item_uuid="+this.id+"&id="+this.data_to_delete.id).then(e=>{this.data.splice(this.data_to_delete.index,1)}).catch(e=>{o.notify("dark",e,"error",this.$q)}).then(e=>{o.hideLoadingBox(this.$q)})}}},V={class:"row items-center justify-between"},z={class:"text-weight-bold"},L={class:"row items-stretch items-center q-gutter-md"},E={class:"col-3"},N={key:1,class:"full-width text-center"},O={class:"text-weight-bold"};function R(e,t,j,k,i,s){const w=C("ConfirmDialog");return r(),l(h,null,[a(T,{onRefresh:s.refresh},{default:d(()=>[a(B,{class:p({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:d(()=>[a($,null,{default:d(()=>[a(f,{onClick:t[0]||(t[0]=m=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),a(I,{class:"text-weight-bold"},{default:d(()=>[g(c(e.$t("Gallery")),1)]),_:1})]),_:1}),a(y)]),_:1},8,["class"]),a(P,{class:p([{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode,"flex flex-center":!i.loading&&!s.hasData},"q-pa-md"])},{default:d(()=>[i.loading?(r(),u(A,{key:0,showing:!0,color:"primary",size:"md"})):(r(),l(h,{key:1},[s.hasData?(r(),l(h,{key:0},[n("div",V,[n("div",z,c(e.$t("Gallery")),1),s.hasData2?(r(),u(f,{key:0,label:i.edit?this.$t("Done"):this.$t("Edit"),flat:"","no-caps":"",color:"primary",onClick:t[1]||(t[1]=m=>i.edit=!i.edit)},null,8,["label"])):_("",!0)]),a(y,{class:"q-mb-lg"}),n("div",L,[(r(!0),l(h,null,Q(i.data,(m,D)=>(r(),l("div",{class:"col-3 relative-position",key:m},[i.edit?(r(),u(f,{key:0,round:"",color:"primary",icon:"las la-trash",dense:"",unelevated:"",size:"sm",class:"absolute-top-left z-max",style:{top:"-10px"},onClick:F=>s.confirmDelete(m,D)},null,8,["onClick"])):_("",!0),a(G,{src:m.image_url,style:{"max-width":"100px",height:"70px"},fit:"cover",class:"radius8 col-3","spinner-color":"primary","spinner-size":"sm"},null,8,["src"])]))),128)),n("div",E,[a(f,{color:"primary","text-color":"white",class:"line-normal radius8 font13",unelevated:"",style:{"min-height":"70px"},"no-caps":"",to:{path:"/item/create-gallery",query:{item_uuid:i.id}}},{default:d(()=>[g(" + "+c(e.$t("Add")),1)]),_:1},8,["to"])])])],64)):(r(),l("div",N,[n("div",O,c(e.$t("ID is missing")),1),n("div",null,c(e.$t("Oops sorry we cannot find what your looking for")),1)]))],64))]),_:1},8,["class"])]),_:1},8,["onRefresh"]),a(w,{ref:"confirm_dialog",data:k.DataStore.data_dialog,onAfterConfirm:s.afterConfirm},null,8,["data","onAfterConfirm"])],64)}var ie=v(S,[["render",R]]);export{ie as default};
