import{_ as y,u as b,A as a,n as s,$ as l,d as r,q as d,Z as f,F as n,a1 as u,V as g,X as h,p as c,ap as k,Y as q,am as $,aq as Q}from"./index.9022de34.js";import{Q as S}from"./QToolbarTitle.5ecfa0aa.js";import{Q as w}from"./QToolbar.2a2e526c.js";import{Q as D}from"./QHeader.522a2ada.js";import{Q as R}from"./QInnerLoading.788e47b1.js";import{Q as C}from"./QSelect.311841ab.js";import{Q as V}from"./QFooter.864bb069.js";import{Q as _}from"./QForm.a6c6ef66.js";import{Q as B}from"./QPage.a79a1249.js";import{u as T}from"./AccessStore.4066b28f.js";import"./QResizeObserver.129b050c.js";import"./QChip.6eb513c3.js";import"./QItemLabel.4dae639c.js";import"./QMenu.d414cf74.js";import"./selection.5d84a74a.js";import"./rtl.b51694b1.js";import"./format.3e32b8d9.js";const A={name:"RoomCreate",setup(){const e=b(),t=T();return{DataStore:e,AccessStore:t}},data(){return{id:"",loading:!1,room_name:"",status:"publish",data:[]}},mounted(){this.id=this.$route.query.id,a.empty(this.id)||this.getRoom()},computed:{isEdit(){return!a.empty(this.id)},hasData(){return Object.keys(this.data).length>0}},methods:{confirmDelete(){a.dialog(this.$t("Delete Confirmation"),this.$t("Are you sure you want to permanently delete the selected item?"),this.$t("Okay"),this.$t("Cancel"),this.$q).then(e=>{this.deleteRecords()}).catch(e=>{})},deleteRecords(){console.log(this.id),this.$q.loading.show({spinnerSize:30,spinnerColor:"primary"}),a.fetchDataByTokenPost("deleteRooms","id="+this.id).then(e=>{this.$router.replace({path:"/table/rooms"})}).catch(e=>{}).then(e=>{this.$q.loading.hide()})},formSubmit(){let e={id:this.id,room_name:this.room_name,status:this.status};a.showLoadingBox("",this.$q),a.fetchDataByTokenPost(a.empty(this.id)?"CreateRoom":"UpdateRoom",e).then(t=>{a.notify("light-green",t.msg,"check_circle",this.$q),this.$router.replace({path:"/table/rooms"})}).catch(t=>{a.notify("red-5",t,"error_outline",this.$q)}).then(t=>{a.hideLoadingBox(this.$q)})},getRoom(){this.loading=!0,a.fetchDataByTokenPost("getRoom","id="+this.id).then(e=>{this.room_name=e.details.room_name,this.status=e.details.status,this.data=e.details}).catch(e=>{}).then(e=>{this.loading=!1})}}},v={key:0,class:"text-center"},N={class:"q-ma-none text-grey"};function E(e,t,P,p,m,i){return s(),l(n,null,[r(D,{class:f({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:d(()=>[r(w,null,{default:d(()=>[r(u,{onClick:t[0]||(t[0]=o=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),r(S,{class:"text-weight-bold"},{default:d(()=>[i.isEdit?(s(),l(n,{key:0},[g(h(e.$t("Update Room")),1)],64)):(s(),l(n,{key:1},[g(h(e.$t("Add Room")),1)],64))]),_:1}),p.AccessStore.hasAccess("booking.room_delete")?(s(),l(n,{key:0},[i.hasData?(s(),c(u,{key:0,onClick:i.confirmDelete,flat:"",round:"",dense:"",icon:"las la-trash-alt",color:e.$q.dark.mode?"white":"dark"},null,8,["onClick","color"])):k("",!0)],64)):k("",!0)]),_:1}),r(q)]),_:1},8,["class"]),r(B,{class:f([{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode,"flex flex-center":i.isEdit&&!i.hasData},"q-pa-md"])},{default:d(()=>[m.loading?(s(),c(R,{key:0,showing:!0,color:"primary",size:"md"})):(s(),c(_,{key:1,onSubmit:i.formSubmit},{default:d(()=>[i.isEdit&&!i.hasData?(s(),l("div",v,[$("p",N,h(e.$t("No data available")),1)])):(s(),l(n,{key:1},[r(Q,{modelValue:m.room_name,"onUpdate:modelValue":t[1]||(t[1]=o=>m.room_name=o),label:e.$t("Room Name"),"stack-label":"",outlined:"",color:"grey-5",rules:[o=>o&&o.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),r(C,{modelValue:m.status,"onUpdate:modelValue":t[2]||(t[2]=o=>m.status=o),options:p.DataStore.status_list,label:e.$t("Status"),"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5",rules:[o=>o&&o.length>0||this.$t("This field is required")],"emit-value":"","map-options":""},null,8,["modelValue","options","label","rules"]),r(V,null,{default:d(()=>[r(u,{type:"submit",color:"primary","text-color":"white",label:e.$t("Save"),unelevated:"",class:"full-width radius8",size:"lg","no-caps":""},null,8,["label"])]),_:1})],64))]),_:1},8,["onSubmit"]))]),_:1},8,["class"])],64)}var ee=y(A,[["render",E]]);export{ee as default};
