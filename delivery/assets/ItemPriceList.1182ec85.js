import{_ as b,aw as C,u as P,A as s,m as q,n as r,$ as d,d as i,q as n,F as h,Z as k,a1 as f,V as u,X as o,Y as v,p as _,am as m,ap as p,a0 as x,ax as Q}from"./index.9022de34.js";import{Q as A}from"./QToolbarTitle.5ecfa0aa.js";import{Q as L}from"./QToolbar.2a2e526c.js";import{Q as z}from"./QHeader.522a2ada.js";import{Q as B}from"./QInnerLoading.788e47b1.js";import{Q as $}from"./QPage.a79a1249.js";import{Q as S}from"./QPullToRefresh.dea2c8d3.js";import{u as T}from"./AccessStore.4066b28f.js";import"./QResizeObserver.129b050c.js";import"./TouchPan.f449f070.js";import"./touch.3df10340.js";import"./selection.5d84a74a.js";import"./format.3e32b8d9.js";const I={name:"ItemAddPrice",components:{ConfirmDialog:C(()=>Q(()=>import("./ConfirmDialog.d3b3cd57.js"),["assets/ConfirmDialog.d3b3cd57.js","assets/QToolbarTitle.5ecfa0aa.js","assets/index.9022de34.js","assets/index.8b19a20e.css","assets/QToolbar.2a2e526c.js"]))},data(){return{dialog_price:!1,id:"",loading:!0,data:[],edit:!1,data_to_delete:[],title:""}},setup(e){const t=P(),g=T();return{DataStore:t,AccessStore:g}},computed:{hasData(){return Object.keys(this.data).length>0||!s.empty(this.id)},hasData2(){return Object.keys(this.data).length>0}},created(){this.id=this.$route.query.item_uuid,s.empty(this.id)?this.loading=!1:this.getPriceList()},methods:{refresh(e){this.getPriceList(e)},getPriceList(e){this.loading=!0,s.fetchDataByTokenPost("getPriceList","id="+this.id).then(t=>{this.data=t.details.price_list,this.title=t.details.item_name}).catch(t=>{this.data=[]}).then(t=>{this.loading=!1,s.empty(e)||e()})},confirmDelete(e,t){this.data_to_delete=e,this.data_to_delete.index=t,this.$refs.confirm_dialog.dialog=!0},afterConfirm(){this.$refs.confirm_dialog.dialog=!1,s.showLoadingBox("",this.$q),s.fetchDataByTokenPost("deletePrice","item_uuid="+this.id+"&item_size_id="+this.data_to_delete.item_size_id).then(e=>{this.data.splice(this.data_to_delete.index,1)}).catch(e=>{s.notify("dark",e,"error",this.$q)}).then(e=>{s.hideLoadingBox(this.$q)})}}},V={class:"row items-center justify-between"},E={class:"text-weight-bold"},N={class:"row items-stretch items-center q-gutter-md"},O={class:"col-3"},R={key:1,class:"full-width text-center"},j={class:"text-weight-bold"};function F(e,t,g,y,a,c){const w=q("ConfirmDialog");return r(),d(h,null,[i(S,{onRefresh:c.refresh},{default:n(()=>[i(z,{class:k({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:n(()=>[i(L,null,{default:n(()=>[i(f,{onClick:t[0]||(t[0]=l=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),i(A,{class:"text-weight-bold"},{default:n(()=>[u(o(e.$t("Price for"))+" "+o(a.title),1)]),_:1})]),_:1}),i(v)]),_:1},8,["class"]),i($,{class:k([{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode,"flex flex-center":!a.loading&&!c.hasData},"q-pa-md"])},{default:n(()=>[a.loading?(r(),_(B,{key:0,showing:!0,color:"primary",size:"md"})):(r(),d(h,{key:1},[c.hasData?(r(),d(h,{key:0},[m("div",V,[m("div",E,o(e.$t("Price")),1),y.AccessStore.hasAccess("food.itemprice_delete")?(r(),d(h,{key:0},[c.hasData2?(r(),_(f,{key:0,label:a.edit?this.$t("Done"):this.$t("Edit"),flat:"","no-caps":"",color:"primary",onClick:t[1]||(t[1]=l=>a.edit=!a.edit)},null,8,["label"])):p("",!0)],64)):p("",!0)]),i(v,{class:"q-mb-lg"}),m("div",N,[(r(!0),d(h,null,x(a.data,(l,D)=>(r(),d("div",{class:"col-3 relative-position",key:l},[a.edit?(r(),_(f,{key:0,round:"",color:"primary",icon:"las la-trash",dense:"",unelevated:"",size:"sm",class:"absolute-top-left z-max",style:{top:"-10px"},onClick:H=>c.confirmDelete(l,D)},null,8,["onClick"])):p("",!0),i(f,{color:"mygrey","text-color":"dark",class:"line-normal radius8 font13",unelevated:"",style:{"min-height":"70px"},"no-caps":"",to:{path:"/item/editprice",query:{item_uuid:a.id,item_size_id:l.item_size_id}}},{default:n(()=>[u(o(l.price)+" "+o(l.size_name),1)]),_:2},1032,["to"])]))),128)),m("div",O,[i(f,{color:"primary","text-color":"white",class:"line-normal radius8 font13",unelevated:"",style:{"min-height":"70px"},"no-caps":"",to:{path:"/item/addprice",query:{item_uuid:a.id}}},{default:n(()=>[u(" + "+o(e.$t("Add")),1)]),_:1},8,["to"])])])],64)):(r(),d("div",R,[m("div",j,o(e.$t("ID is missing")),1),m("div",null,o(e.$t("Oops sorry we cannot find what your looking for")),1)]))],64))]),_:1},8,["class"])]),_:1},8,["onRefresh"]),i(w,{ref:"confirm_dialog",data:y.DataStore.data_dialog,onAfterConfirm:c.afterConfirm},null,8,["data","onAfterConfirm"])],64)}var re=b(I,[["render",F]]);export{re as default};
