import{_ as A,aw as g,u as T,A as y,m as Q,n as a,p as f,q as r,d as t,a1 as b,V as S,X as d,Y as V,Z as v,am as p,aq as B,a9 as P,ap as m,$ as o,F as i,a0 as w,ax as q,a3 as E,a4 as C,a5 as L}from"./index.9022de34.js";import{Q as N}from"./QToolbarTitle.5ecfa0aa.js";import{Q as R}from"./QToolbar.2a2e526c.js";import{Q as j}from"./QHeader.522a2ada.js";import{Q as z}from"./QSpace.fb5f89a7.js";import{Q as F}from"./QImg.ad5480e5.js";import{Q as _}from"./QItemLabel.4dae639c.js";import{Q as O}from"./QList.da851dcd.js";import{Q as $}from"./QAjaxBar.fee622cb.js";import{Q as H}from"./QPage.a79a1249.js";import{Q as M}from"./QPullToRefresh.dea2c8d3.js";import{u as U}from"./SearchStore.4dfed49a.js";import{u as X}from"./CartStore.2adbc30c.js";import"./QResizeObserver.129b050c.js";import"./format.3e32b8d9.js";import"./TouchPan.f449f070.js";import"./touch.3df10340.js";import"./selection.5d84a74a.js";const Y={name:"SearchTables",components:{TableSkeleton:g(()=>q(()=>import("./TableSkeleton.dba5d973.js"),["assets/TableSkeleton.dba5d973.js","assets/QSkeleton.5de72ea8.js","assets/index.9022de34.js","assets/index.8b19a20e.css","assets/QItemLabel.4dae639c.js","assets/QList.da851dcd.js"])),ItemDetails:g(()=>q(()=>import("./ItemDetails.ae0eac8b.js"),["assets/ItemDetails.ae0eac8b.js","assets/index.9022de34.js","assets/index.8b19a20e.css","assets/QImg.ad5480e5.js","assets/QItemLabel.4dae639c.js","assets/QList.da851dcd.js","assets/QSelect.311841ab.js","assets/QChip.6eb513c3.js","assets/QMenu.d414cf74.js","assets/selection.5d84a74a.js","assets/rtl.b51694b1.js","assets/format.3e32b8d9.js","assets/QSpace.fb5f89a7.js","assets/ClosePopup.6b679ccd.js"]))},setup(){const e=U(),l=T(),k=X();return{SearchStore:e,DataStore:l,CartStore:k}},data(){return{q:"",loading:!1}},created(){this.SearchStore.data=""},computed:{hasSearch(){return!y.empty(this.q)}},methods:{viewItems(e){let l=this.$refs.bar;this.$refs.item_details.getMenuItem(e,l)},refresh(e){this.clearSearch(),e()},clearSearch(){this.SearchStore.is_submit=!1,this.q="",this.SearchStore.data=[]},doSearch(){this.loading=!0,this.SearchStore.data=[],this.SearchStore.status=[],this.SearchStore.is_submit=!0,y.fetchDataByTokenPost("searchfooditems","q="+this.q).then(e=>{this.SearchStore.data=e.details.data}).catch(e=>{}).then(e=>{this.loading=!1})},afterAddtocart(){this.CartStore.getCart(this.DataStore.cart_uuid)}}},Z={class:"q-pa-md full-width"},G={key:0,class:"full-width text-center"},J={key:1,class:"full-width text-center"},K={class:"text-weight-bold"},W={class:"text-weight-light text-grey"};function ee(e,l,k,n,h,c){const I=Q("TableSkeleton"),x=Q("ItemDetails");return a(),f(M,{onRefresh:c.refresh},{default:r(()=>[t(j,{class:v({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode}),reveal:"","reveal-offset":"50"},{default:r(()=>[t(R,null,{default:r(()=>[t(b,{onClick:l[0]||(l[0]=s=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),t(N,{class:"text-weight-bold"},{default:r(()=>[S(d(e.$t("Search items")),1)]),_:1})]),_:1}),t(V)]),_:1},8,["class"]),t(H,{class:v([{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode},"flex justify-start"])},{default:r(()=>[p("div",Z,[t(B,{outlined:"",modelValue:h.q,"onUpdate:modelValue":l[1]||(l[1]=s=>h.q=s),label:e.$t("Search"),color:"grey-5"},{append:r(()=>[n.SearchStore.hasData?(a(),f(P,{key:0,class:"cursor-pointer",name:"close",color:"grey",onClick:c.clearSearch},null,8,["onClick"])):m("",!0),n.SearchStore.hasData?m("",!0):(a(),f(b,{key:1,icon:"search",unelevated:"",color:"dark-grey","no-caps":"",loading:h.loading,round:"",flat:"",onClick:c.doSearch,disable:!c.hasSearch},null,8,["loading","onClick","disable"]))]),_:1},8,["modelValue","label"]),n.SearchStore.hasData?(a(),o(i,{key:0},[t(z,{class:"q-mt-md"}),t(O,{separator:""},{default:r(()=>[(a(!0),o(i,null,w(n.SearchStore.data,s=>(a(),f(E,{key:s,clickable:"",onClick:u=>c.viewItems(s)},{default:r(()=>[t(C,{avatar:"",top:""},{default:r(()=>[t(L,{size:"50px"},{default:r(()=>[t(F,{src:s.url_image,style:{width:"50px",height:"50px"}},null,8,["src"])]),_:2},1024)]),_:2},1024),t(C,null,{default:r(()=>[t(_,{class:"text-dark"},{default:r(()=>[S(d(s.item_name),1)]),_:2},1024),t(_,{caption:"",lines:"2"},{default:r(()=>[S(d(s.item_description),1)]),_:2},1024),t(_,{caption:""},{default:r(()=>[(a(!0),o(i,null,w(s.price,(u,D)=>(a(),o(i,{key:u},[D<=0?(a(),o(i,{key:0},[u.discount>0?(a(),o(i,{key:0},[S(d(u.pretty_price_after_discount),1)],64)):(a(),o(i,{key:1},[S(d(u.pretty_price),1)],64))],64)):m("",!0)],64))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})],64)):m("",!0),h.loading?(a(),f(I,{key:1,rows:10})):m("",!0)]),n.SearchStore.is_submit?(a(),o("div",J,[!n.SearchStore.hasData&&!h.loading?(a(),o(i,{key:0},[p("div",K,d(e.$t("No data available")),1),p("div",W,d(e.$t("Sorry, we couldn't find any results")),1)],64)):m("",!0)])):(a(),o("div",G)),t(x,{ref:"item_details",onAfterAddtocart:c.afterAddtocart},null,8,["onAfterAddtocart"]),t($,{ref:"bar",position:"top",color:"primary",size:"2px","skip-hijack":""},null,512)]),_:1},8,["class"])]),_:1},8,["onRefresh"])}var ge=A(Y,[["render",ee]]);export{ge as default};
