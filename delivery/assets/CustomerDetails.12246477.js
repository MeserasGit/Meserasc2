import{_ as S,aw as y,u as V,A as u,m as k,n as s,p as i,q as o,d as a,a1 as v,V as h,X as l,ap as P,Y as A,Z as C,$ as c,F as f,am as d,a5 as w,a0 as p,ax as Q,a3 as T,a4 as D,b8 as I}from"./index.9022de34.js";import{Q as N}from"./QToolbarTitle.5ecfa0aa.js";import{Q as z}from"./QToolbar.2a2e526c.js";import{Q as $}from"./QHeader.522a2ada.js";import{Q as E}from"./QInnerLoading.788e47b1.js";import{Q as R}from"./QImg.ad5480e5.js";import{Q as q}from"./QChip.6eb513c3.js";import{Q as x}from"./QSpace.fb5f89a7.js";import{Q as j}from"./QSkeleton.5de72ea8.js";import{Q as U}from"./QTab.43d13fc7.js";import{Q as F}from"./QTabs.a2ac70b0.js";import{Q as g}from"./QItemLabel.4dae639c.js";import{Q as O}from"./QList.da851dcd.js";import{Q as H,a as X}from"./QTabPanels.2669cc39.js";import{Q as Y}from"./QPage.a79a1249.js";import{Q as Z}from"./QPullToRefresh.dea2c8d3.js";import"./QResizeObserver.129b050c.js";import"./rtl.b51694b1.js";import"./use-panel.09edc9f3.js";import"./touch.3df10340.js";import"./selection.5d84a74a.js";import"./use-cache.b0833c75.js";import"./TouchPan.f449f070.js";import"./format.3e32b8d9.js";const G={data(){return{loading:!1,data:[],client_id:0,tab:"",tab_menu:[{label:this.$t("Order History"),value:"order_history"},{label:this.$t("Addresses"),value:"address"}],loading_summary:!1,data_summary:[],data_orders:[],loading_orders:!1,block_from_ordering:!1}},components:{ListNoData:y(()=>Q(()=>import("./ListNoData.2fb52f53.js"),["assets/ListNoData.2fb52f53.js","assets/index.9022de34.js","assets/index.8b19a20e.css"])),ConfirmDialog:y(()=>Q(()=>import("./ConfirmDialog.d3b3cd57.js"),["assets/ConfirmDialog.d3b3cd57.js","assets/QToolbarTitle.5ecfa0aa.js","assets/index.9022de34.js","assets/index.8b19a20e.css","assets/QToolbar.2a2e526c.js"])),ListLoading:y(()=>Q(()=>import("./ListLoading.273123b5.js"),["assets/ListLoading.273123b5.js","assets/index.9022de34.js","assets/index.8b19a20e.css"]))},setup(){return{DataStore:V()}},created(){this.client_id=this.$route.query.client_id,this.client_id>0&&(this.getCustomerDetails(),this.getCustomerSummary(),this.getCustomerOrders()),this.tab=this.DataStore.customer_tab},watch:{tab(e,r){this.DataStore.customer_tab=this.tab}},computed:{hasData(){return Object.keys(this.data).length>0},hasOrders(){return Object.keys(this.data_orders).length>0},hasAddress(){return Object.keys(this.data).length>0&&Object.keys(this.data.addresses).length>0}},methods:{confirmBlock(){this.block_from_ordering?this.blockCustomer(0):this.$refs.confirm_dialog.dialog=!0},refresh(e){this.getCustomerDetails(e),this.getCustomerSummary(e),this.getCustomerOrders(e)},getCustomerDetails(e){this.loading=!0,u.fetchDataByTokenPost("getCustomerDetails","client_id="+this.client_id).then(r=>{this.data=r.details,this.block_from_ordering=r.details.block_from_ordering}).catch(r=>{this.data=[]}).then(r=>{this.loading=!1,u.empty(e)||e()})},getCustomerSummary(e){this.loading_summary=!0,u.fetchDataByTokenPost("getCustomerSummary","client_id="+this.client_id).then(r=>{this.data_summary=r.details}).catch(r=>{this.data_summary=[]}).then(r=>{this.loading_summary=!1,u.empty(e)||e()})},getCustomerOrders(e){this.loading_orders=!0,u.fetchDataByTokenPost("getCustomerOrders","client_id="+this.client_id).then(r=>{this.data_orders=r.details}).catch(r=>{this.data_orders=[]}).then(r=>{this.loading_orders=!1,u.empty(e)||e()})},afterConfirm(){this.blockCustomer(1)},blockCustomer(e){this.$refs.confirm_dialog.dialog=!1,u.showLoadingBox("",this.$q),u.fetchDataByTokenPost("blockCustomer","client_id="+this.client_id+"&block="+e).then(r=>{this.block_from_ordering=r.details}).catch(r=>{u.notify("dark",r,"error",this.$q)}).then(r=>{u.hideLoadingBox(this.$q)})}}},J={class:"text-center"},K={class:"text-weight-bold"},M={class:"col-2 text-center"},W={class:"text-weight-bold font16 ellipsis"},ee={class:"font12 text-blue-grey-2"},te={class:"col text-center"},ae={class:"text-weight-bold font16 ellipsis"},re={class:"font12 text-blue-grey-2"},oe={class:"col text-center"},se={class:"text-weight-bold font16 ellipsis"},le={class:"font12 text-blue-grey-2"},ie={class:"col text-center"},de={class:"text-weight-bold font16 ellipsis"},ne={class:"font12 text-blue-grey-2"};function me(e,r,ue,ce,t,_){const L=k("ListLoading"),b=k("ListNoData"),B=k("ConfirmDialog");return s(),i(Z,{onRefresh:_.refresh},{default:o(()=>[a($,{class:C({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:o(()=>[a(z,null,{default:o(()=>[a(v,{onClick:r[0]||(r[0]=n=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),_.hasData&&!t.loading?(s(),i(N,{key:0,class:"text-weight-bold"},{default:o(()=>[h(l(e.$t("Customer ID"))+" #"+l(t.data.customer.client_id),1)]),_:1})):P("",!0)]),_:1}),a(A)]),_:1},8,["class"]),a(Y,{class:C([{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode},"q-pa-md"])},{default:o(()=>[t.loading?(s(),i(E,{key:0,showing:!0,color:"primary",size:"md","label-class":"dark",class:"transparent"})):(s(),c(f,{key:1},[_.hasData&&!t.loading?(s(),c(f,{key:0},[d("div",J,[a(w,{size:"70px"},{default:o(()=>[a(R,{src:t.data.customer.avatar,"spinner-color":"white","placeholder-src":"placeholder.png",fit:"cover",style:{height:"70px",width:"70px"}},null,8,["src"])]),_:1}),d("div",K,l(t.data.customer.first_name)+" "+l(t.data.customer.last_name),1),d("div",null,[a(v,{"no-caps":"",size:"sm",flat:"",label:t.block_from_ordering==!0?this.$t("Unblock Customer"):this.$t("Block Customer"),color:"blue-grey-4",class:"q-pa-none",onClick:_.confirmBlock},null,8,["label","onClick"])]),a(q,{size:"sm",color:e.$q.dark.mode?"grey600":"white"},{default:o(()=>[a(w,{icon:"phone",color:"red","text-color":"white"}),h(" "+l(t.data.customer.contact_phone),1)]),_:1},8,["color"]),a(q,{size:"sm",color:e.$q.dark.mode?"grey600":"white"},{default:o(()=>[a(w,{icon:"email",color:"blue","text-color":"white"}),h(" "+l(t.data.customer.email_address),1)]),_:1},8,["color"])]),a(x,{class:"q-pa-sm"}),t.loading_summary?(s(),i(j,{key:0,height:"50px",square:"",class:"radius8"})):(s(),c("div",{key:1,class:C(["q-pa-sm radius8 row",{"bg-grey600 text-white":e.$q.dark.mode,"bg-grey-1 text-dark":!e.$q.dark.mode}])},[d("div",M,[d("div",W,l(t.data_summary.orders),1),d("div",ee,l(e.$t("Orders")),1)]),d("div",te,[d("div",ae,l(t.data_summary.order_cancel),1),d("div",re,l(e.$t("Cancel")),1)]),d("div",oe,[d("div",se,l(t.data_summary.total_refund),1),d("div",le,l(e.$t("Refund")),1)]),d("div",ie,[d("div",de,l(t.data_summary.total),1),d("div",ne,l(e.$t("Total")),1)])],2)),a(x,{class:"q-pa-sm"}),a(F,{modelValue:t.tab,"onUpdate:modelValue":r[1]||(r[1]=n=>t.tab=n),dense:"","no-caps":"","active-color":"primary","indicator-color":e.$q.dark.mode?"mydark":"white",align:"justify","narrow-indicator":"",shrink:"","switch-indicator":"false",class:"text-grey"},{default:o(()=>[(s(!0),c(f,null,p(t.tab_menu,n=>(s(),i(U,{key:n,name:n.value,"no-caps":"",class:"no-wrap q-pa-none"},{default:o(()=>[a(v,{label:n.label,unelevated:"","no-caps":"",color:t.tab==n.value?"primary":"mygrey","text-color":t.tab==n.value?"white":"dark",class:"radius28"},null,8,["label","color","text-color"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","indicator-color"]),a(x,{class:"q-pa-xs"}),a(H,{modelValue:t.tab,"onUpdate:modelValue":r[2]||(r[2]=n=>t.tab=n),animated:"","transition-prev":"fade","transition-next":"fade"},{default:o(()=>[(s(!0),c(f,null,p(t.tab_menu,n=>(s(),i(X,{key:n,name:n.value,class:"q-pa-none"},{default:o(()=>[n.value=="order_history"?(s(),c(f,{key:0},[t.loading_orders?(s(),i(L,{key:0})):!t.loading_orders&&!_.hasOrders?(s(),i(b,{key:1,title:e.$t("No transactions"),subtitle:e.$t("new transactions will show here")},null,8,["title","subtitle"])):(s(),i(O,{key:2,separator:""},{default:o(()=>[(s(!0),c(f,null,p(t.data_orders,m=>(s(),i(T,{key:m,clickable:"",to:{path:"/orderview",query:{order_uuid:m.order_uuid}}},{default:o(()=>[a(D,null,{default:o(()=>[a(g,{class:"text-weight-medium"},{default:o(()=>[h("Order #"+l(m.order_id),1)]),_:2},1024),a(g,{caption:"",class:"font11"},{default:o(()=>[h(l(m.date_created),1)]),_:2},1024)]),_:2},1024),a(D,{side:"",class:"text-weight-medium"},{default:o(()=>[a(g,null,{default:o(()=>[h(l(m.total),1)]),_:2},1024),a(g,null,{default:o(()=>[a(q,{size:"xs",color:"primary","text-color":"white",style:I(`color:${m.status.font_color_hex} !important; background-color:${m.status.background_color_hex} !important; `)},{default:o(()=>[h(l(m.status.status),1)]),_:2},1032,["style"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:2},1024))],64)):(s(),c(f,{key:1},[t.loading?(s(),i(L,{key:0})):!t.loading&&!_.hasData?(s(),i(b,{key:1,title:e.$t("No available data"),subtitle:e.$t("if there is address it will show here")},null,8,["title","subtitle"])):(s(),i(O,{key:2,separator:""},{default:o(()=>[(s(!0),c(f,null,p(t.data.addresses,m=>(s(),i(T,{key:m},{default:o(()=>[a(D,null,{default:o(()=>[a(g,{caption:""},{default:o(()=>[h(l(m.address),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024))],64))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])],64)):(s(),i(b,{key:1,title:e.$t("No available data"),subtitle:e.$t("Customer information not found")},null,8,["title","subtitle"]))],64))]),_:1},8,["class"]),a(B,{ref:"confirm_dialog",data:{title:this.$t("Block Customer"),subtitle:this.$t("block_user"),cancel:this.$t("Cancel"),confirm:this.$t("Confirm")},onAfterConfirm:_.afterConfirm},null,8,["data","onAfterConfirm"])]),_:1},8,["onRefresh"])}var Ne=S(G,[["render",me]]);export{Ne as default};
