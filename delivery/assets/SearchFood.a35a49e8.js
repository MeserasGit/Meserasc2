import{_ as Q,aw as x,u as V,A as d,m as C,n as l,$ as h,d as e,q as r,Z as v,F as u,a1 as q,V as I,X as p,Y as T,am as i,aq as H,a9 as k,p as b,ap as N,a0 as S,ax as O,a3 as F,a4 as w}from"./index.9022de34.js";import{Q as D}from"./QToolbarTitle.5ecfa0aa.js";import{Q as P}from"./QToolbar.2a2e526c.js";import{Q as A}from"./QHeader.522a2ada.js";import{Q as y}from"./QSkeleton.5de72ea8.js";import{Q as B}from"./QList.da851dcd.js";import{Q as j}from"./QTab.43d13fc7.js";import{Q as J}from"./QTabs.a2ac70b0.js";import{Q as L}from"./QSpace.fb5f89a7.js";import{Q as R,a as g}from"./QTabPanels.2669cc39.js";import{Q as U}from"./QBtnToggle.28ce7519.js";import{Q as $}from"./QPage.a79a1249.js";import"./QResizeObserver.129b050c.js";import"./rtl.b51694b1.js";import"./use-panel.09edc9f3.js";import"./touch.3df10340.js";import"./selection.5d84a74a.js";import"./use-cache.b0833c75.js";const _="merchant_search_food",E={name:"SearchFood",components:{SearchItemList:x(()=>O(()=>import("./SearchItemList.9aa5cf64.js"),["assets/SearchItemList.9aa5cf64.js","assets/QImg.ad5480e5.js","assets/index.9022de34.js","assets/index.8b19a20e.css","assets/QChip.6eb513c3.js","assets/QItemLabel.4dae639c.js","assets/QList.da851dcd.js"]))},data(){return{tab:"all",q:"",loading:!1,awaitingSearch:!1,data_recent:[],search_history:[],limit:50,page:1,data:[],category:[],items:[],addons:[],addon_item:[],tab_menu:[{label:this.$t("All"),value:"all"},{label:this.$t("Category"),value:"category"},{label:this.$t("Items"),value:"items"},{label:this.$t("Addons"),value:"addons"},{label:this.$t("Addon Item"),value:"addon_item"}]}},setup(a){return{DataStore:V()}},created(){this.q=this.DataStore.search_item,this.getSearchHistory()},watch:{q(a,t){if(!this.awaitingSearch){if(typeof this.q=="undefined"||this.q===null||this.q===""||this.q==="null"||this.q==="undefined")return!1;setTimeout(()=>{this.saveHistory(),this.DataStore.search_item=this.q;let c="q="+this.q;c+="&limit="+this.limit,c+="&page="+this.page,d.fetchDataByTokenPost("SearchMenu",c).then(n=>{this.category=n.details.category,this.items=n.details.items,this.addons=n.details.addons,this.addon_item=n.details.addon_item,this.data=this.category.concat(this.items,this.addons,this.addon_item)}).catch(n=>{this.data=[],this.category=[],this.items=[],this.addons=[],this.addon_item=[]}).then(n=>{this.awaitingSearch=!1})},1e3)}this.awaitingSearch=!0}},computed:{hasHistory(){return Object.keys(this.data_recent).length>0},hasFilter(){return!d.empty(this.q)},hasResults(){return Object.keys(this.data).length>0}},methods:{getSearchHistory(){const a=d.getStorage(_);if(!d.empty(a)){let t=JSON.parse(a);Object.keys(t).length>0&&(this.data_recent=[],Object.entries(t).forEach(([c,n])=>{this.data_recent.push({label:n,value:n})}))}},saveHistory(){const a=d.getStorage(_);let t=[],c=0;d.empty(a)?(t.push(this.q),d.setStorage(_,JSON.stringify(t))):(t=JSON.parse(a),c=t.length,console.log(t),c>4&&t.splice(0,1),t.includes(this.q)||(t.push(this.q),d.setStorage(_,JSON.stringify(t))),this.getSearchHistory())},showPreview(a){this.order_items=a,this.$refs.order_preview.dialog=!0},afterUpdatestatus(){},removeHistory(){this.data_recent=[],d.setStorage(_,JSON.stringify(this.data_recent))}}},z={class:"q-pa-md"},K={class:"q-pl-md q-pr-md"},M={key:0,class:"flex flex-center",style:{height:"calc(70vh)"}},X={class:"full-width text-center"},Y={class:"text-weight-bold"},Z={class:"text-weight-light text-grey"},G={key:1,class:"q-pl-md q-pr-md"},W={class:"row item-center justify-between"},ee={class:"font13 text-weight-bold text-h5"},te={key:1,class:"flex flex-center",style:{height:"calc(70vh)"}},ae={class:"full-width text-center"},se={class:"text-weight-bold"},oe={class:"text-weight-light text-grey"};function re(a,t,c,n,s,m){const f=C("SearchItemList");return l(),h(u,null,[e(A,{class:v({"bg-mydark text-white":a.$q.dark.mode,"bg-white text-dark":!a.$q.dark.mode}),reveal:"","reveal-offset":"50"},{default:r(()=>[e(P,null,{default:r(()=>[e(q,{onClick:t[0]||(t[0]=o=>a.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:a.$q.dark.mode?"white":"dark"},null,8,["color"]),e(D,{class:"text-weight-bold"},{default:r(()=>[I(p(a.$t("Search Food Items")),1)]),_:1})]),_:1}),e(T)]),_:1},8,["class"]),e($,{class:v({"bg-mydark text-white":a.$q.dark.mode,"bg-white text-dark":!a.$q.dark.mode})},{default:r(()=>[i("div",z,[e(H,{outlined:"",modelValue:s.q,"onUpdate:modelValue":t[2]||(t[2]=o=>s.q=o),label:a.$t("Search"),color:"grey-5","lazy-rules":""},{prepend:r(()=>[e(k,{name:"search"})]),append:r(()=>[m.hasFilter?(l(),b(k,{key:0,class:"cursor-pointer",name:"close",color:"grey",onClick:t[1]||(t[1]=o=>this.q="")})):N("",!0)]),_:1},8,["modelValue","label"])]),m.hasFilter&&s.awaitingSearch?(l(),b(B,{key:0},{default:r(()=>[(l(),h(u,null,S(5,o=>e(F,{key:o},{default:r(()=>[e(w,{avatar:""},{default:r(()=>[e(y,{width:"80px",height:"80px"})]),_:1}),e(w,null,{default:r(()=>[e(y,{type:"text"}),e(y,{type:"text",class:"w-50"}),e(y,{type:"text",class:"w-70"}),e(y,{type:"text",class:"w-25"})]),_:1})]),_:2},1024)),64))]),_:1})):m.hasResults&&!s.awaitingSearch&&s.q?(l(),h(u,{key:1},[i("div",K,[e(J,{modelValue:s.tab,"onUpdate:modelValue":t[3]||(t[3]=o=>s.tab=o),dense:"","no-caps":"","active-color":"primary","indicator-color":"grey-1",align:"justify","narrow-indicator":"",shrink:"","switch-indicator":"false",class:"text-grey"},{default:r(()=>[(l(!0),h(u,null,S(s.tab_menu,o=>(l(),b(j,{key:o,name:o.value,"no-caps":"",class:"no-wrap q-pa-none"},{default:r(()=>[e(q,{label:o.label,unelevated:"","no-caps":"",color:s.tab==o.value?"primary":"mygrey","text-color":s.tab==o.value?"white":"dark",class:"radius28 q-mr-sm"},null,8,["label","color","text-color"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),e(L,{class:"q-pa-xs"}),e(R,{modelValue:s.tab,"onUpdate:modelValue":t[4]||(t[4]=o=>s.tab=o),animated:"","transition-next":"fade","transition-prev":"fade",class:v({"bg-mydark ":a.$q.dark.mode,"bg-white ":!a.$q.dark.mode})},{default:r(()=>[e(g,{name:"all",class:"q-pa-none"},{default:r(()=>[e(f,{data:s.data},null,8,["data"])]),_:1}),e(g,{name:"category",class:"q-pa-none"},{default:r(()=>[e(f,{data:s.category},null,8,["data"])]),_:1}),e(g,{name:"items",class:"q-pa-none"},{default:r(()=>[e(f,{data:s.items},null,8,["data"])]),_:1}),e(g,{name:"addons",class:"q-pa-none"},{default:r(()=>[e(f,{data:s.addons},null,8,["data"])]),_:1}),e(g,{name:"addon_item",class:"q-pa-none"},{default:r(()=>[e(f,{data:s.addon_item},null,8,["data"])]),_:1})]),_:1},8,["modelValue","class"])],64)):(l(),h(u,{key:2},[m.hasFilter&&!s.awaitingSearch?(l(),h("div",M,[i("div",X,[i("div",Y,p(a.$t("No item found")),1),i("div",Z,p(a.$t("Sorry, we couldn't find any results")),1)])])):(l(),h("div",G,[m.hasHistory?(l(),h(u,{key:0},[i("div",W,[i("div",ee,p(a.$t("Recently Search")),1),i("div",null,[e(q,{onClick:m.removeHistory,round:"",color:"grey",icon:"las la-times",size:"xs",flat:""},null,8,["onClick"])])]),e(U,{modelValue:s.search_history,"onUpdate:modelValue":t[5]||(t[5]=o=>s.search_history=o),"toggle-color":"secondary",color:a.$q.dark.mode?"grey600":"mygrey","text-color":a.$q.dark.mode?"grey300":"dark","no-caps":"","no-wrap":"",unelevated:"",class:"rounded-group2 text-weight-bold line-1",options:s.data_recent,onClick:t[6]||(t[6]=o=>this.q=this.search_history)},null,8,["modelValue","color","text-color","options"])],64)):(l(),h("div",te,[i("div",ae,[i("div",se,p(a.$t("Search food items")),1),i("div",oe,p(a.$t("Search category,items,addon and addon items"))+". ",1)])]))]))],64))]),_:1},8,["class"])],64)}var we=Q(E,[["render",re]]);export{we as default};
