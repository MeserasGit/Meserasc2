import{_ as G,aw as w,u as X,A as _,l as Z,m as q,n as i,p as m,q as t,d as e,a1 as D,V as n,X as o,Z as T,$ as d,am as c,a3 as p,a4 as u,F as h,ap as g,a2 as B,b8 as J,a9 as S,Y as Q,a5 as K,a0 as b,b6 as U,ax as C}from"./index.9022de34.js";import{Q as W}from"./QToolbarTitle.5ecfa0aa.js";import{Q as ee}from"./QToolbar.2a2e526c.js";import{Q as te}from"./QHeader.522a2ada.js";import{Q as re}from"./QInnerLoading.788e47b1.js";import{Q as f}from"./QItemLabel.4dae639c.js";import{Q as E}from"./QChip.6eb513c3.js";import{Q as k}from"./QList.da851dcd.js";import{Q as se}from"./QMenu.d414cf74.js";import{Q as L}from"./QExpansionItem.ea7db586.js";import{Q as R}from"./QImg.ad5480e5.js";import{Q as oe}from"./QBadge.3c540cd9.js";import{Q as ae}from"./QPage.a79a1249.js";import{Q as ie}from"./QFooter.864bb069.js";import{Q as le}from"./QPullToRefresh.dea2c8d3.js";import{C as $}from"./ClosePopup.6b679ccd.js";import{P as ne}from"./PrintTemplate.26cb5c79.js";import{A}from"./AppBluetooth.7e08b241.js";import"./QResizeObserver.129b050c.js";import"./selection.5d84a74a.js";import"./QSlideTransition.3f201d8d.js";import"./TouchPan.f449f070.js";import"./touch.3df10340.js";import"./format.3e32b8d9.js";const de={name:"OrderDetails",components:{OrderDeliveryDetails:w(()=>C(()=>import("./OrderDeliveryDetails.80bed8fb.js"),["assets/OrderDeliveryDetails.80bed8fb.js","assets/QToolbarTitle.5ecfa0aa.js","assets/index.9022de34.js","assets/index.8b19a20e.css","assets/QSpace.fb5f89a7.js","assets/QToolbar.2a2e526c.js","assets/QTimeline.c77a0e67.js"])),RejectionList:w(()=>C(()=>import("./RejectionList.bf16462f.js"),["assets/RejectionList.bf16462f.js","assets/QToolbarTitle.5ecfa0aa.js","assets/index.9022de34.js","assets/index.8b19a20e.css","assets/QSpace.fb5f89a7.js","assets/QToolbar.2a2e526c.js","assets/QItemLabel.4dae639c.js","assets/QList.da851dcd.js","assets/QFooter.864bb069.js","assets/QResizeObserver.129b050c.js","assets/QForm.a6c6ef66.js","assets/ClosePopup.6b679ccd.js"])),DelayOrder:w(()=>C(()=>import("./DelayOrder.1b6b4e71.js"),["assets/DelayOrder.1b6b4e71.js","assets/QToolbarTitle.5ecfa0aa.js","assets/index.9022de34.js","assets/index.8b19a20e.css","assets/QSpace.fb5f89a7.js","assets/QToolbar.2a2e526c.js","assets/QBtnToggle.28ce7519.js","assets/QFooter.864bb069.js","assets/QResizeObserver.129b050c.js","assets/QForm.a6c6ef66.js","assets/ClosePopup.6b679ccd.js"])),ContactPhone:w(()=>C(()=>import("./ContactPhone.14cfd935.js"),["assets/ContactPhone.14cfd935.js","assets/QToolbarTitle.5ecfa0aa.js","assets/index.9022de34.js","assets/index.8b19a20e.css","assets/QToolbar.2a2e526c.js","assets/QFooter.864bb069.js","assets/QResizeObserver.129b050c.js","assets/ClosePopup.6b679ccd.js"])),PrinterList:w(()=>C(()=>import("./PrinterList.7ee09b64.js"),["assets/PrinterList.7ee09b64.js","assets/index.9022de34.js","assets/index.8b19a20e.css","assets/QToolbarTitle.5ecfa0aa.js","assets/QSpace.fb5f89a7.js","assets/QToolbar.2a2e526c.js","assets/QList.da851dcd.js","assets/QFooter.864bb069.js","assets/QResizeObserver.129b050c.js","assets/ClosePopup.6b679ccd.js","assets/UserStore.e6e92fbc.js"])),PaymentHistory:w(()=>C(()=>import("./PaymentHistory.863c39d0.js"),["assets/PaymentHistory.863c39d0.js","assets/QToolbarTitle.5ecfa0aa.js","assets/index.9022de34.js","assets/index.8b19a20e.css","assets/QSpace.fb5f89a7.js","assets/QToolbar.2a2e526c.js","assets/QTimeline.c77a0e67.js"])),CancelOrder:w(()=>C(()=>import("./RejectionList.bf16462f.js"),["assets/RejectionList.bf16462f.js","assets/QToolbarTitle.5ecfa0aa.js","assets/index.9022de34.js","assets/index.8b19a20e.css","assets/QSpace.fb5f89a7.js","assets/QToolbar.2a2e526c.js","assets/QItemLabel.4dae639c.js","assets/QList.da851dcd.js","assets/QFooter.864bb069.js","assets/QResizeObserver.129b050c.js","assets/QForm.a6c6ef66.js","assets/ClosePopup.6b679ccd.js"])),PrintPreview:w(()=>C(()=>import("./PrintPreview.a4f718c6.js"),["assets/PrintPreview.a4f718c6.js","assets/QSpace.fb5f89a7.js","assets/index.9022de34.js","assets/index.8b19a20e.css","assets/ClosePopup.6b679ccd.js","assets/PrintTemplate.26cb5c79.js"]))},data(){return{order_uuid:"",order_data:[],loading:!1,order_items:[],order_summary:[],order_info:[],order_label:[],refund_transaction:[],order_status:[],order_services:[],merchant:[],progress:0,data_progress:[],progress_order_status:"",progress_order_status_details:"",allowed_to_cancel:!1,pdf_link:"",delivery_timeline:[],order_delivery_status:[],allowed_to_review:!1,payload:["merchant_info","items","summary","order_info","progress","refund_transaction","status_allowed_cancelled","pdf_link","delivery_timeline","order_delivery_status","allowed_to_review","credit_card","driver"],buttons:[],button_uuid:"",group_name:"",map_direction:"",credit_card_details:"",printer_details:[],customer:[],driver_data:[],is_refresh:!1}},created(){this.order_uuid=this.$route.query.order_uuid,this.orderDetails()},setup(){return{DataStore:X()}},computed:{hasRefund(){return this.refund_transaction.length>0},hasData(){return Object.keys(this.order_data).length>0},hasCustomer(){return Object.keys(this.customer).length>0},showAssign(){return this.order_info.show_assign_driver},canReassign(){return this.order_info.can_reassign_driver},hasDriver(){return Object.keys(this.driver_data).length>0}},methods:{changeColor(r){let s="mygrey";switch(r){case"btn-green":s="primary";break;case"btn-yellow":s="yellow-9";break;case"btn-black":s="mygrey";break}return s},changeTextColor(r){let s="white";switch(r){case"btn-green":s="white";break;case"btn-yellow":s="white";break;case"btn-black":s="dark";break}return s},refresh(r){r?this.is_refresh=!0:this.is_refresh=!1,this.orderDetails(r),this.$refs.payment_history.getOrderHistory()},orderDetails(r){this.loading=!0,_.fetchDataByToken("orderDetails",{order_uuid:this.order_uuid,hide_currency:this.DataStore.hide_currency?1:0,payload:this.payload}).then(s=>{this.order_data=s.details,this.merchant=s.details.data.merchant,this.order_items=s.details.data.items,this.order_summary=s.details.data.summary,this.order_info=s.details.data.order.order_info,this.order_label=s.details.data.label,this.refund_transaction=s.details.data.refund_transaction,this.order_status=s.details.data.order.status,this.order_services=s.details.data.order.services,this.data_progress=s.details.data.progress,this.progress=s.details.data.progress.order_progress,this.allowed_to_cancel=s.details.data.allowed_to_cancel,this.pdf_link=s.details.data.pdf_link,this.delivery_timeline=s.details.data.delivery_timeline,this.order_delivery_status=s.details.data.order_delivery_status,this.allowed_to_review=s.details.data.allowed_to_review,this.customer=s.details.data.customer,this.driver_data=s.details.data.driver_data,this.progress_order_status=s.details.data.progress.order_status,this.progress_order_status_details=s.details.data.progress.order_status_details,this.order_services=this.order_services[this.order_info.service_code],this.order_status=this.order_status[this.order_info.status],this.buttons=s.details.data.buttons,this.group_name=s.details.data.group_name,this.map_direction=s.details.data.map_direction,this.credit_card_details=s.details.data.credit_card_details,_.empty(this.credit_card_details)||(this.credit_card_details=Z(this.credit_card_details))}).catch(s=>{this.order_data=[]}).then(s=>{this.loading=!1,this.is_refresh=!1,_.empty(r)||r()})},doActions(r){console.log(r),this.button_uuid=r.uuid,r.do_actions=="reject_form"?this.$refs.rejection.dialog=!0:this.getOrderSummaryChanges(r)},afterAddreason(r){this.dialog=!1,this.updateOrderStatus(r,"updateOrderStatus")},updateOrderStatus(r,s){_.showLoadingBox("",this.$q),_.fetchDataByToken(s,{order_uuid:this.order_info.order_uuid,reason:r,uuid:this.button_uuid}).then(P=>{this.orderDetails(),this.$refs.payment_history.getOrderHistory()}).catch(P=>{_.notify("dark",P,"error",this.$q)}).then(P=>{_.hideLoadingBox(this.$q)})},getOrderSummaryChanges(r){_.showLoadingBox("",this.$q),_.fetchDataByToken("getOrderSummaryChanges",{order_uuid:this.order_info.order_uuid,group_name:this.group_name}).then(s=>{this.method=s.details.summary_changes.method,this.commission=s.details.commission,console.log(this.method),this.method=="less_on_account"?this.$q.dialog({title:this.$t("Accept Order"),message:this.commission,cancel:{label:this.$t("Cancel"),"no-caps":!0,flat:!0},persistent:!0,transitionShow:"none",transitionHide:"none",ok:{label:this.$t("Less on my account"),"no-caps":!0,unelevated:!0,class:"radius8"}}).onOk(()=>{this.updateOrderStatus("","lessCashOnAccount")}):this.updateOrderStatus("","updateOrderStatus")}).catch(s=>{_.notify("dark",s,"error",this.$q)}).then(s=>{_.hideLoadingBox(this.$q)})},afterSelect(r){_.showLoadingBox("",this.$q),_.fetchDataByToken("setDelayToOrder",{order_uuid:this.order_info.order_uuid,time_delay:r}).then(s=>{_.notify("positive",s.msg,"check",this.$q)}).catch(s=>{_.notify("dark",s,"error",this.$q)}).then(s=>{_.hideLoadingBox(this.$q)})},showPrinter(){this.$q.capacitor?this.DataStore.osVersion>=12?this.$q.platform.is.ios?this.EnabledBT():A.CheckBTConnectPermissionOnly().then(r=>{this.EnabledBT()}).catch(r=>{this.$router.push("/settings/location-enabled")}).then(r=>{}):A.CheckLocationOnly().then(r=>{this.$refs.printer.dialog=!0}).catch(r=>{this.$router.push("/settings/location-enabled")}).then(r=>{}):this.$refs.printer.dialog=!0},EnabledBT(){A.Enabled().then(r=>{this.$refs.printer.dialog=!0}).catch(r=>{_.notify("dark",r.message,"error",this.$q)}).then(r=>{})},afterSelectprinter(r){this.printer_details=r,r.printer_model=="feieyun"?this.FPprint(r):this.$q.capacitor?this.CheckBT():_.notify("dark",this.$t("Bluetooth Printers works only in actual device"),"error",this.$q)},CheckBT(){A.Enabled().then(r=>{this.DataStore.printer_set==2?this.$refs.print_preview.showDialog(!0,!1):this.BondAndConnect()}).catch(r=>{_.notify("dark",r,"error",this.$q)}).then(r=>{})},BondAndConnect(){this.$refs.printer.dialog=!1,_.showLoadingBox(this.$t("Connecting..."),this.$q),A.Connect(this.printer_details.printer_uuid,this.printer_details.printer_model).then(r=>{this.Print()}).catch(r=>{_.notify("dark",r,"error",this.$q)}).then(r=>{_.hideLoadingBox(this.$q)})},Print(r){let s=ne.ReceiptTemplate(this.printer_details.paper_width,this.order_info,this.merchant,this.order_items,this.order_summary);console.log("TEMPLATE ==>"),console.log(s.tpl_all),console.log(s.tpl_data),Object.keys(s).length>0&&(this.printer_details.printer_model=="sunmi"?this.printData(s.tpl_all):Object.entries(s.tpl_data).forEach(([P,O])=>{_.empty(O)||(P>0?setTimeout(()=>{console.log(O),this.printData(O)},2e3):(console.log(O),this.printData(O)))}))},printData(r){_.showLoadingBox(this.$t("Printing..."),this.$q),A.Print(this.printer_details.printer_uuid,r,this.printer_details.printer_model,this.printer_details.service_id,this.printer_details.characteristics).then(s=>{}).catch(s=>{_.notify("dark",s,"error",this.$q)}).then(s=>{_.hideLoadingBox(this.$q)})},FPprint(r){this.$refs.printer.dialog=!1,_.showLoadingBox(this.$t("Printing..."),this.$q),_.fetchDataByTokenPost("FPprint","printer_id="+r.printer_id+"&order_uuid="+this.order_info.order_uuid).then(s=>{_.notify("green",s.msg,"check",this.$q)}).catch(s=>{_.notify("dark",s,"error",this.$q)}).then(s=>{_.hideLoadingBox(this.$q)})},afterCancel(r){console.log(r),_.showLoadingBox("",this.$q),_.fetchDataByTokenPost("cancelOrder","order_uuid="+this.order_uuid+"&reason="+r).then(s=>{this.orderDetails()}).catch(s=>{_.notify("dark",s,"error",this.$q)}).then(s=>{_.hideLoadingBox(this.$q)})}}},_e={key:1,class:"full-width text-center"},ue={class:"text-weight-bold"},ce={class:"text-grey font12"},he={class:"q-mr-sm text-weight-bold"},fe={class:"text-weight-bold"},pe={class:"text-weight-light font11"},me={key:0,class:"text-bold"},ye={class:"text-bold"},ge={class:"text-bold"},ke={key:0},ve={class:"text-bold"},be={class:"row q-gutter-sm q-mb-sm"},we={class:"text-weight-bold font14"},qe={class:"text-weight-light font11"},De={class:"text-weight-bold font14"},Ce=["src"],xe={key:1,class:"text-grey"},Pe={class:"no-margin"},Oe=["innerHTML"],Le={class:"m-0 text-grey"},Ae={key:0,class:"no-margin"},Te={key:1,class:"no-margin"},Be=["innerHTML"],Qe={key:2,class:"no-margin"},$e={key:0,class:"no-margin"},Se={key:1,class:"no-margin"},Ee={class:"no-margin font12 text-weight-bold"};function Re(r,s,P,O,a,y){const I=q("OrderDeliveryDetails"),z=q("RejectionList"),V=q("DelayOrder"),j=q("ContactPhone"),H=q("PrinterList"),N=q("PaymentHistory"),F=q("CancelOrder"),M=q("PrintPreview");return i(),m(le,{onRefresh:y.refresh},{default:t(()=>[e(te,{class:T({"bg-mydark text-white":r.$q.dark.mode,"bg-grey-1 text-dark":!r.$q.dark.mode})},{default:t(()=>[e(ee,null,{default:t(()=>[e(D,{onClick:s[0]||(s[0]=l=>r.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:r.$q.dark.mode?"white":"dark"},null,8,["color"]),e(W,{class:"text-weight-bold"},{default:t(()=>[n(o(r.$t("Order Details")),1)]),_:1})]),_:1})]),_:1},8,["class"]),e(ae,{class:T([{"bg-mydark text-white":r.$q.dark.mode,"bg-grey-1 text-dark":!r.$q.dark.mode,"flex flex-center":!a.loading&&!y.hasData},"q-pl-md q-pr-md q-pb-md"])},{default:t(()=>[a.loading&&!a.is_refresh?(i(),m(re,{key:0,showing:!0,color:"primary",size:"md","label-class":"dark",class:"transparent"})):y.hasData?(i(),d(h,{key:2},[e(k,null,{default:t(()=>[e(p,{class:"q-pl-none q-pr-none"},{default:t(()=>[e(u,null,{default:t(()=>[e(f,{class:"text-dark text-weight-bold"},{default:t(()=>[n(o(r.$t("Order ID")),1)]),_:1}),e(f,{caption:"",class:"font12"},{default:t(()=>[c("span",he,"#"+o(a.order_info.order_id),1),e(E,{color:r.$q.dark.mode?"grey600":"mygrey","text-color":r.$q.dark.mode?"grey300":"dark",size:"sm",class:"q-ma-none"},{default:t(()=>[n(o(a.order_services.service_name),1)]),_:1},8,["color","text-color"])]),_:1}),e(f,{caption:"",class:"font12 q-gutter-xs"},{default:t(()=>[c("div",fe,o(a.order_info.payment_name),1),c("div",pe,o(a.order_info.place_on),1),c("div",null,[n(o(r.$t("Delivery Date/Time"))+": ",1),a.order_info.whento_deliver=="schedule"?(i(),d("span",me,o(a.order_info.schedule_at),1)):(i(),d(h,{key:1},[n(o(a.order_info.delivery_date)+" "+o(a.order_info.delivery_time),1)],64))]),c("div",null,[n(o(r.$t("Include utensils"))+": ",1),c("span",ye,[a.order_info.include_utensils==1?(i(),d(h,{key:0},[n(o(r.$t("Yes")),1)],64)):(i(),d(h,{key:1},[n(o(r.$t("No")),1)],64))])]),c("div",null,[n(o(r.$t("Payment status"))+": ",1),c("span",ge,o(a.order_info.payment_status),1)]),a.order_info.payment_change>0?(i(),d("div",ke,[n(o(r.$t("Payment change"))+": ",1),c("span",ve,o(a.order_info.payment_change_pretty),1)])):g("",!0)]),_:1})]),_:1}),e(u,{side:"",top:""},{default:t(()=>[c("div",be,[e(D,{round:"",color:"mygrey","text-color":"dark",icon:"las la-print",unelevated:"",size:"md",onClick:y.showPrinter},null,8,["onClick"]),e(D,{round:"",color:"primary",icon:"las la-ellipsis-h",unelevated:"",size:"md"},{default:t(()=>[e(se,null,{default:t(()=>[e(k,{style:{"min-width":"150px"},separator:""},{default:t(()=>[B((i(),m(p,{clickable:"",onClick:s[1]||(s[1]=l=>this.$refs.contact_phone.dialog=!0)},{default:t(()=>[e(u,null,{default:t(()=>[n(o(r.$t("Contact customer")),1)]),_:1})]),_:1})),[[$]]),B((i(),m(p,{clickable:"",onClick:s[2]||(s[2]=l=>this.$refs.delay_order.dialog=!0)},{default:t(()=>[e(u,null,{default:t(()=>[n(o(r.$t("Delay order")),1)]),_:1})]),_:1})),[[$]]),a.allowed_to_cancel?B((i(),m(p,{key:0,clickable:"",onClick:s[3]||(s[3]=l=>this.$refs.cancel_order.dialog=!0)},{default:t(()=>[e(u,null,{default:t(()=>[n(o(r.$t("Cancel order")),1)]),_:1})]),_:1})),[[$]]):g("",!0)]),_:1})]),_:1})]),_:1})]),e(E,{color:"mygrey","text-color":"dark",size:"sm",style:J(`color:${a.order_status.font_color_hex} !important; background-color:${a.order_status.background_color_hex} !important; `),class:"q-ma-none"},{default:t(()=>[n(o(a.order_status.status),1)]),_:1},8,["style"])]),_:1})]),_:1}),e(p,{onClick:s[4]||(s[4]=l=>this.$refs.OrderDeliveryDetails.dialog=!0),clickable:"",class:"q-pl-none q-pr-none q-pt-none"},{default:t(()=>[e(u,null,{default:t(()=>[e(f,{caption:"",class:"font12"},{default:t(()=>[c("div",we,o(r.$t("Timeline")),1),c("div",qe,o(a.progress_order_status),1)]),_:1})]),_:1}),e(u,{avatar:""},{default:t(()=>[e(S,{color:"grey",size:"15px",name:"las la-angle-right"})]),_:1})]),_:1}),e(Q),e(p,{onClick:s[5]||(s[5]=l=>this.$refs.payment_history.dialog=!0),clickable:"",class:"q-pl-none q-pr-none q-pt-none"},{default:t(()=>[e(u,null,{default:t(()=>[e(f,{caption:"",class:"font12"},{default:t(()=>[c("div",De,o(r.$t("Payment history")),1)]),_:1})]),_:1}),e(u,{avatar:""},{default:t(()=>[e(S,{color:"grey",size:"15px",name:"las la-angle-right"})]),_:1})]),_:1})]),_:1}),y.hasCustomer?(i(),m(k,{key:0,class:"qlist-no-padding border-grey-top"},{default:t(()=>[a.customer.client_id?(i(),m(L,{key:0,"expand-separator":"",label:r.$t("Customer"),class:"expansion-q-pl-none"},{default:t(()=>[e(k,null,{default:t(()=>[e(p,null,{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(K,null,{default:t(()=>[c("img",{src:a.customer.avatar},null,8,Ce)]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(f,{caption:"",class:"font13"},{default:t(()=>[n(o(a.customer.first_name)+" "+o(a.customer.last_name),1)]),_:1}),e(f,{caption:"",class:"font13"},{default:t(()=>[n(o(a.customer.contact_phone),1)]),_:1}),e(f,{caption:"",class:"font13"},{default:t(()=>[n(o(a.customer.email_address),1)]),_:1})]),_:1})]),_:1}),e(p,{clickable:""},{default:t(()=>[e(D,{flat:"",color:"blue","no-caps":"",class:"full-width",to:{path:"customer/details",query:{client_id:a.customer.client_id}}},{default:t(()=>[n(o(a.customer.order_count)+" "+o(r.$t("Orders")),1)]),_:1},8,["to"])]),_:1})]),_:1})]),_:1},8,["label"])):g("",!0)]),_:1})):g("",!0),a.order_info.points_to_earn>0?(i(),m(k,{key:1,class:"qlist-no-padding border-grey-top"},{default:t(()=>[e(L,{"expand-separator":"",label:r.$t("Loyalty Points"),caption:a.order_info.points_label2,class:"expansion-q-pl-none"},null,8,["label","caption"])]),_:1})):g("",!0),a.order_info.order_type=="delivery"?(i(),m(k,{key:2,class:"qlist-no-padding border-grey-top"},{default:t(()=>[e(L,{"expand-separator":"",label:r.$t("Delivery information"),class:"expansion-q-pl-none"},{default:t(()=>[e(k,null,{default:t(()=>[e(p,null,{default:t(()=>[e(u,null,{default:t(()=>[e(f,{caption:"",class:"font13"},{default:t(()=>[n(o(a.order_info.customer_name),1)]),_:1}),e(f,{caption:"",class:"font13"},{default:t(()=>[n(o(a.order_info.contact_number),1)]),_:1}),e(f,{caption:"",class:"font13"},{default:t(()=>[c("div",null,o(a.order_info.delivery_address),1),c("div",null,o(a.order_info.delivery_instructions),1),a.map_direction?(i(),m(D,{key:0,flat:"",color:"blue","no-caps":"",size:"md",class:"q-pa-none full-width",href:a.map_direction,target:"_blank"},{default:t(()=>[n(o(r.$t("Get direction")),1)]),_:1},8,["href"])):g("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["label"])]),_:1})):g("",!0),a.order_info.order_type=="delivery"?(i(),m(k,{key:3,class:"qlist-no-padding border-grey-top"},{default:t(()=>[e(L,{"expand-separator":"",label:r.$t("Driver"),caption:y.showAssign?a.driver_data.driver_name:"",class:"expansion-q-pl-none"},{default:t(()=>[e(k,null,{default:t(()=>[e(p,null,{default:t(()=>[y.showAssign||y.canReassign?(i(),d(h,{key:0},[y.hasDriver?(i(),d(h,{key:0},[e(u,{avatar:""},{default:t(()=>[e(R,{src:a.driver_data.photo_url,lazy:"",fit:"cover",style:{height:"50px",width:"50px"},class:"rounded-borders"},null,8,["src"])]),_:1}),e(u,null,{default:t(()=>[e(f,{caption:"",class:"font13"},{default:t(()=>[c("div",null,o(a.driver_data.driver_name),1),c("div",null,o(a.driver_data.phone_number),1),c("div",null,o(a.driver_data.email_address),1)]),_:1})]),_:1})],64)):(i(),d(h,{key:1},[a.order_info.can_reassign_driver?(i(),m(D,{key:0,to:{path:"driver/assign",query:{order_uuid:this.order_uuid}},flat:"",color:"blue","no-caps":"",size:"md",class:"q-pa-none full-width"},{default:t(()=>[n(o(r.$t("Assign Driver")),1)]),_:1},8,["to"])):(i(),d("p",xe,o(r.$t("No assign driver to this order")),1))],64))],64)):g("",!0)]),_:1}),y.hasDriver&&y.canReassign?(i(),m(p,{key:0},{default:t(()=>[e(D,{to:{path:"driver/assign",query:{order_uuid:this.order_uuid}},flat:"",color:"blue","no-caps":"",size:"md",class:"q-pa-none full-width"},{default:t(()=>[n(o(r.$t("Regassign Driver")),1)]),_:1},8,["to"])]),_:1})):g("",!0)]),_:1})]),_:1},8,["label","caption"])]),_:1})):g("",!0),a.credit_card_details?(i(),m(k,{key:4,class:"qlist-no-padding border-grey-top"},{default:t(()=>[e(L,{"expand-separator":"",label:r.$t("Credit card details")},{default:t(()=>[e(p,null,{default:t(()=>[e(u,null,{default:t(()=>[(i(!0),d(h,null,b(a.credit_card_details,(l,v)=>(i(),m(f,{key:l,caption:"",class:"font12"},{default:t(()=>[n(o(v)+" : "+o(l),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["label"])]),_:1})):g("",!0),y.hasRefund?(i(),m(k,{key:5,class:"qlist-no-padding border-grey-top"},{default:t(()=>[e(L,{"expand-separator":"",label:r.$t("Refund Issued")},{default:t(()=>[e(k,null,{default:t(()=>[e(p,null,{default:t(()=>[e(u,null,{default:t(()=>[(i(!0),d(h,null,b(a.refund_transaction,l=>(i(),d(h,{key:l},[e(f,{caption:"",class:"font12"},{default:t(()=>[n(o(r.$t("Description"))+": "+o(l.description),1)]),_:2},1024),e(f,{caption:"",class:"font12"},{default:t(()=>[n(o(r.$t("Amount"))+": "+o(l.trans_amount),1)]),_:2},1024),e(f,{caption:"",class:"font12"},{default:t(()=>[n(o(r.$t("Issued to"))+": "+o(l.used_card),1)]),_:2},1024),e(f,{caption:"",class:"font12"},{default:t(()=>[n(o(r.$t("Date issued"))+": "+o(l.date),1)]),_:2},1024)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["label"])]),_:1})):g("",!0),e(U,{flat:"",class:"radius8"},{default:t(()=>[e(k,{class:"q-pb-md"},{default:t(()=>[e(p,null,{default:t(()=>[e(u,null,{default:t(()=>[e(f,{lines:"1",class:"text-weight-medium text-grey font13"},{default:t(()=>[c("div",null,o(r.$t("Order Details")),1)]),_:1})]),_:1})]),_:1}),(i(!0),d(h,null,b(a.order_items,l=>(i(),d(h,{key:l.item_id},[e(p,null,{default:t(()=>[e(u,{avatar:"",top:""},{default:t(()=>[e(R,{src:l.url_image,lazy:"",fit:"cover",style:{height:"50px",width:"50px"},class:"rounded-borders"},null,8,["src"])]),_:2},1024),e(u,{top:""},{default:t(()=>[e(f,{class:"text-weight-bold q-mb-xs font12"},{default:t(()=>[c("p",Pe,[n(o(l.qty)+" x ",1),c("span",{innerHTML:l.item_name},null,8,Oe),l.price.size_name!=""?(i(),d(h,{key:0},[n(" ("+o(l.price.size_name)+") ",1)],64)):g("",!0),l.item_changes=="replacement"?(i(),d(h,{key:1},[c("div",Le,o(r.$t("Replace"))+' "'+o(l.item_name_replace)+'" ',1),e(oe,{color:"primary","text-color":"white",label:r.$t("Replacement")},null,8,["label"])],64)):g("",!0)])]),_:2},1024),e(f,{caption:"",class:"text-weight-medium font12"},{default:t(()=>[l.price.discount>0?(i(),d("p",Ae,[c("del",null,o(l.price.pretty_price),1),n(" "+o(l.price.pretty_price_after_discount),1)])):(i(),d("p",Te,o(l.price.pretty_price),1)),c("div",{class:"text-weight-bold font12 text-dark",innerHTML:l.category_name},null,8,Be),l.special_instructions!=""?(i(),d("p",Qe,o(l.special_instructions),1)):g("",!0),l.attributes!=""?(i(!0),d(h,{key:3},b(l.attributes,v=>(i(),d("p",{key:v,class:"no-margin"},[(i(!0),d(h,null,b(v,(x,Y)=>(i(),d(h,null,[n(o(x),1),Y<v.length-1?(i(),d(h,{key:0},[n(", ")],64)):g("",!0)],64))),256))]))),128)):g("",!0)]),_:2},1024)]),_:2},1024),e(u,{side:"",top:""},{default:t(()=>[e(f,{caption:"",class:"text-weight-bold font12"},{default:t(()=>[l.price.discount<=0?(i(),d("p",$e,o(l.price.pretty_total),1)):(i(),d("p",Se,o(l.price.pretty_total_after_discount),1))]),_:2},1024)]),_:2},1024)]),_:2},1024),e(p,{class:"q-item-small"},{default:t(()=>[e(u,{avatar:""}),e(u,null,{default:t(()=>[e(f,{class:"text-weight-bold font12"},{default:t(()=>[n(o(r.$t("If sold out")),1)]),_:1}),e(f,{caption:""},{default:t(()=>[n(o(l.if_sold_out),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),(i(!0),d(h,null,b(l.addons,v=>(i(),d(h,{key:v},[e(p,{class:"q-item-small"},{default:t(()=>[e(u,{avatar:""}),e(u,null,{default:t(()=>[e(f,{class:"text-weight-bold font12"},{default:t(()=>[n(o(v.subcategory_name),1)]),_:2},1024)]),_:2},1024),e(u,{side:"",top:""})]),_:2},1024),(i(!0),d(h,null,b(v.addon_items,x=>(i(),m(p,{key:x,class:"q-item-small"},{default:t(()=>[e(u,{avatar:""}),e(u,{top:""},{default:t(()=>[e(f,{lines:"1",class:"font12 text-weight-medium"},{default:t(()=>[n(o(x.qty)+" x "+o(x.pretty_price)+" "+o(x.sub_item_name),1)]),_:2},1024)]),_:2},1024),e(u,{side:"",top:""},{default:t(()=>[c("p",Ee,o(x.pretty_addons_total),1)]),_:2},1024)]),_:2},1024))),128))],64))),128)),e(Q,{inset:""})],64))),128)),e(p,{class:"q-pb-none",style:{"min-height":"auto"}},{default:t(()=>[e(u,{class:"text-weight-medium font13"},{default:t(()=>[n(o(r.$t("Summary")),1)]),_:1})]),_:1}),(i(!0),d(h,null,b(a.order_summary,l=>(i(),d(h,{key:l.name},[l.type=="total"?(i(),d(h,{key:0},[e(Q,{spaced:"",inset:""}),e(p,{dense:"",class:"q-pb-none",style:{"min-height":"auto"}},{default:t(()=>[e(u,{class:"font13 text-weight-medium"},{default:t(()=>[n(o(l.name),1)]),_:2},1024),e(u,{side:"",class:"font13 text-weight-medium"},{default:t(()=>[n(o(l.value),1)]),_:2},1024)]),_:2},1024)],64)):(i(),m(p,{key:1,dense:"",class:"q-pb-none",style:{"min-height":"auto"}},{default:t(()=>[e(u,{class:"font13 text-weight-medium"},{default:t(()=>[n(o(l.name),1)]),_:2},1024),e(u,{side:"",class:"font13 text-weight-medium"},{default:t(()=>[n(o(l.value),1)]),_:2},1024)]),_:2},1024))],64))),128))]),_:1})]),_:1})],64)):(i(),d("div",_e,[c("div",ue,o(r.$t("No available data")),1),c("p",ce,o(r.$t("Sorry we cannot load what your looking for"))+". ",1)]))]),_:1},8,["class"]),e(I,{ref:"OrderDeliveryDetails",data:a.delivery_timeline,order_status:a.order_delivery_status,progress:a.data_progress},null,8,["data","order_status","progress"]),a.loading?g("",!0):(i(),m(ie,{key:0,class:T(["q-gutter-sm q-pl-md q-pr-md q-pb-sm",{row:a.buttons.length<=2,column:a.buttons.length>2,"bg-mydark text-white":r.$q.dark.mode,"bg-white text-black":!r.$q.dark.mode}])},{default:t(()=>[(i(!0),d(h,null,b(a.buttons,l=>(i(),d("div",{key:l,class:"col"},[a.order_info.status.toLowerCase().trim()!=l.button_name.toLowerCase().trim()?(i(),m(D,{key:0,unelevated:"","no-caps":"",class:"radius8 fit",size:"lg",color:y.changeColor(l.class_name),"text-color":y.changeTextColor(l.class_name),label:l.button_name,onClick:v=>y.doActions(l)},null,8,["color","text-color","label","onClick"])):g("",!0)]))),128))]),_:1},8,["class"])),e(z,{ref:"rejection",onAfterAddreason:y.afterAddreason},null,8,["onAfterAddreason"]),e(V,{ref:"delay_order",onAfterSelect:y.afterSelect},null,8,["onAfterSelect"]),e(j,{ref:"contact_phone",data:a.order_info},null,8,["data"]),e(H,{ref:"printer",onAfterSelectprinter:y.afterSelectprinter},null,8,["onAfterSelectprinter"]),e(N,{ref:"payment_history",order_uuid:a.order_uuid},null,8,["order_uuid"]),e(F,{ref:"cancel_order",onAfterAddreason:y.afterCancel},null,8,["onAfterAddreason"]),e(M,{ref:"print_preview",printer_details:a.printer_details,order_info:a.order_info,merchant:a.merchant,order_items:a.order_items,order_summary:a.order_summary,order_services:a.order_services},null,8,["printer_details","order_info","merchant","order_items","order_summary","order_services"])]),_:1},8,["onRefresh"])}var nt=G(de,[["render",Re]]);export{nt as default};
