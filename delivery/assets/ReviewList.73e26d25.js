import{_ as b,aw as C,A as _,m as x,n as r,$ as d,d as e,q as a,F as f,Z as w,a1 as L,p as h,V as u,X as o,ap as y,Y as P,a0 as Q,am as v,ax as V,a3 as $,a4 as k,a5 as q}from"./index.9022de34.js";import{Q as I}from"./QToolbarTitle.5ecfa0aa.js";import{Q as A}from"./QToolbar.2a2e526c.js";import{Q as D}from"./QHeader.522a2ada.js";import{Q as T}from"./QImg.ad5480e5.js";import{Q as p}from"./QItemLabel.4dae639c.js";import{Q as B}from"./QChip.6eb513c3.js";import{Q as z}from"./QRating.e76279dc.js";import{Q as N}from"./QList.da851dcd.js";import{Q as S}from"./QInnerLoading.788e47b1.js";import{Q as E}from"./QSpinnerDots.97006177.js";import{Q as j}from"./QInfiniteScroll.0e0d2cfe.js";import{Q as F}from"./QPage.a79a1249.js";import{Q as O}from"./QPullToRefresh.dea2c8d3.js";import"./QResizeObserver.129b050c.js";import"./format.3e32b8d9.js";import"./TouchPan.f449f070.js";import"./touch.3df10340.js";import"./selection.5d84a74a.js";const H={name:"ReviewList",components:{ReviewReply:C(()=>V(()=>import("./ReviewReply.0316ab5d.js"),["assets/ReviewReply.0316ab5d.js","assets/QToolbarTitle.5ecfa0aa.js","assets/index.9022de34.js","assets/index.8b19a20e.css","assets/QSpace.fb5f89a7.js","assets/QToolbar.2a2e526c.js","assets/QCircularProgress.54b08c59.js","assets/format.3e32b8d9.js","assets/QFooter.864bb069.js","assets/QResizeObserver.129b050c.js","assets/QForm.a6c6ef66.js","assets/ClosePopup.6b679ccd.js"]))},data(){return{loading:!0,data:[],page:0,data_done:!1,is_refresh:void 0,selected_items:[],total_items:0}},computed:{hasData(){return Object.keys(this.data).length>0}},created(){},methods:{initReply(t){this.selected_items=t,this.$refs.review_reply.dialog=!0},refresh(t){this.resetPagination(),this.is_refresh=t},getCustomerReview(t,i){this.loading=!0,_.fetchDataByTokenPost("getCustomerReview","page="+t).then(m=>{this.page=t,this.total_items=m.details.total_items,this.data.push(m.details.data)}).catch(m=>{this.data_done=!0,this.$refs.nscroll.stop()}).then(m=>{i(),this.loading=!1,_.empty(this.is_refresh)||this.is_refresh()})},resetPagination(){this.page=0,this.data=[],this.$refs.nscroll.reset(),this.$refs.nscroll.resume(),this.$refs.nscroll.trigger()},afterReply(){this.$refs.review_reply.dialog=!1,this.resetPagination()}}},U={key:1,class:"row justify-center q-my-md"},X={key:0,class:"full-width text-center"},Y={class:"text-weight-bold"},Z={class:"text-grey font12"};function G(t,i,m,J,l,n){const R=x("ReviewReply");return r(),d(f,null,[e(O,{onRefresh:n.refresh},{default:a(()=>[e(D,{class:w({"bg-mydark text-white":t.$q.dark.mode,"bg-white text-dark":!t.$q.dark.mode})},{default:a(()=>[e(A,null,{default:a(()=>[e(L,{onClick:i[0]||(i[0]=c=>t.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:t.$q.dark.mode?"white":"dark"},null,8,["color"]),l.loading?y("",!0):(r(),h(I,{key:0,class:"text-weight-bold"},{default:a(()=>[u(o(t.$t("Customer reviews"))+" ("+o(l.total_items)+")",1)]),_:1}))]),_:1}),e(P)]),_:1},8,["class"]),e(F,{class:w({"bg-mydark text-white":t.$q.dark.mode,"bg-white text-dark":!t.$q.dark.mode,"flex flex-center":!l.loading&&!n.hasData})},{default:a(()=>[e(j,{ref:"nscroll",onLoad:n.getCustomerReview,offset:250},{loading:a(()=>[l.page<=0?(r(),h(S,{key:0,showing:!0,color:"primary",size:"md"})):(r(),d("div",U,[e(E,{color:"primary",size:"40px"})]))]),default:a(()=>[e(N,{separator:""},{default:a(()=>[(r(!0),d(f,null,Q(l.data,c=>(r(),d(f,{key:c},[(r(!0),d(f,null,Q(c,s=>(r(),h($,{key:s,clickable:"",onClick:g=>n.initReply(s)},{default:a(()=>[e(k,{avatar:""},{default:a(()=>[e(q,null,{default:a(()=>[e(T,{src:s.avatar,"spinner-color":"white","placeholder-src":"placeholder.png"},null,8,["src"])]),_:2},1024)]),_:2},1024),e(k,{side:""},{default:a(()=>[e(p,{class:"text-weight-bold"},{default:a(()=>[u(o(s.customer_fullname),1)]),_:2},1024),e(p,{caption:""},{default:a(()=>[u(o(s.review),1)]),_:2},1024),e(p,{caption:"",class:"font11"},{default:a(()=>[u(o(s.date_created),1)]),_:2},1024),e(p,null,{default:a(()=>[e(B,{label:s.status,size:"sm"},null,8,["label"]),e(z,{modelValue:t.rating,"onUpdate:modelValue":i[1]||(i[1]=g=>t.rating=g),"model-value":s.rating,size:"13px",max:5,color:"grey","color-selected":"yellow-14",readonly:"",class:"q-mb-xs no-shadow"},null,8,["modelValue","model-value"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))],64))),128))]),_:1})]),_:1},8,["onLoad"]),!l.loading&&!n.hasData?(r(),d("div",X,[v("div",Y,o(t.$t("No data available")),1),v("p",Z,o(t.$t("new review will show here")),1)])):y("",!0)]),_:1},8,["class"])]),_:1},8,["onRefresh"]),e(R,{ref:"review_reply",data:l.selected_items,onAfterReply:n.afterReply},null,8,["data","onAfterReply"])],64)}var ge=b(H,[["render",G]]);export{ge as default};
